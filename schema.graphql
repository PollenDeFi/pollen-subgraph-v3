type User @entity {
  id: ID!
  portfolioHistory: [Portfolio!]! @derivedFrom(field: "owner")
  currentPortfolio: Portfolio
  stats: UserStat!
}

type Asset @entity {
  id: ID!
  name: String!
  symbol: String!
  decimals: Int!
}

type AssetBalance @entity {
  id: ID!
  asset: Asset!
  amount: BigInt!
}

type Portfolio @entity {
  id: ID!
  owner: User!
  assetBalances: [AssetBalance!]!
  initialValue: BigInt!
  closingValue: BigInt
  pollenStake: BigInt!
  createdTimestamp: BigInt!
  closedTimestamp: BigInt
}

type PollenToken @entity {
  id: ID!
  asset: Asset!
  supply: BigInt!
}

type Delegation @entity {
  id: ID!
  delegator: User!
  delegatee: User!
  amount: BigInt!
  token: PollenToken!
}

type UserStat @entity {
  id: ID!
  totalDelegatedTo: BigInt!
  totalDelegatedFrom: BigInt!
  reputation: BigInt!
  pollenPnl: BigInt!
}
