type User @entity {
  id: ID!
  portfolioHistory: [Portfolio!]! @derivedFrom(field: "owner")
  currentPortfolio: Portfolio
  stats: UserStat!
}

type Asset @entity {
  id: ID!
  name: String!
  symbol: String!
  decimals: Int!
  avgAllocation: Int!
  isRemoved: Boolean!
  addedTimestamp: BigInt!
}

type PortfolioAllocation @entity {
  id: ID!
  asset: Asset!
  amount: BigInt!
  weight: Int!
  initialUsdPrice: BigInt!
}

type Portfolio @entity {
  id: ID!
  owner: User!
  allocations: [PortfolioAllocation!]!
  initialValue: BigInt!
  closingValue: BigInt
  pollenStake: BigInt!
  stakeGainOrLoss: BigInt!
  createdTimestamp: BigInt!
  closedTimestamp: BigInt
}

type Delegation @entity {
  id: ID!
  delegator: User!
  delegatee: User!
  amount: BigInt!
}

type UserStat @entity {
  id: ID!
  totalDelegatedTo: BigInt!
  totalDelegatedFrom: BigInt!
  reputation: BigDecimal!
  pollenPnl: BigDecimal!
  totalRebalances: BigInt!
}

type Module @entity {
  id: ID!
  address: String!
  lastUpdated: BigInt!
}
